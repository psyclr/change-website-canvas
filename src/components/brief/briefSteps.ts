import { BriefData, BriefStep } from './types';

export const briefSteps = (briefData: BriefData): BriefStep[] => {
  // Начальный выбор пути
  const initialStep: BriefStep = {
    id: 'initial',
    title: 'У вас уже есть сайт?',
    type: 'choice',
    field: 'hasSite',
    options: ['Нет, нужен новый сайт', 'Есть сайт, но требует доработки'],
    canSkip: false
  };

  // Сценарий А: новый сайт
  const scenarioA: BriefStep[] = [
    {
      id: 'business',
      title: 'Расскажите о вашем бизнесе',
      type: 'text',
      field: 'business',
      placeholder: 'Например: Мы ремонтируем велосипеды уже 10 лет, специализируемся на горных и шоссейных велосипедах',
      options: ['интернет-магазин', 'услуги для бизнеса', 'услуги для частных лиц', 'производство', 'ресторан/кафе', 'медицина', 'образование', 'другое'],
      canSkip: true
    },
    {
      id: 'audience',
      title: 'Кто ваши основные клиенты?',
      type: 'text',
      field: 'audience',
      placeholder: 'Опишите, кто покупает ваши товары или услуги, их возраст, интересы, потребности',
      options: ['владельцы бизнеса', 'частные лица', 'семьи с детьми', 'молодежь 18-30', 'средний возраст 30-50', 'пожилые люди 50+', 'специалисты в области'],
      canSkip: true
    },
    {
      id: 'goals',
      title: 'Основные цели сайта',
      type: 'multiselect',
      field: 'goals',
      options: [
        'привлекать новых клиентов',
        'получать онлайн заявки',
        'продавать товары/услуги',
        'показывать портфолио работ',
        'предоставлять информацию о компании',
        'обучать и консультировать',
        'собирать контакты потенциальных клиентов',
        'улучшить имидж компании'
      ],
      canSkip: true
    },
    {
      id: 'style',
      title: 'Предпочтения в дизайне',
      type: 'choice',
      field: 'style',
      options: [
        'минимализм — чистый, простой дизайн',
        'классический деловой — строгий и надежный',
        'современный яркий — смелые цвета и формы',
        'творческий — необычный и запоминающийся',
        'не знаю, доверяюсь профессионалам'
      ],
      canSkip: true
    },
    {
      id: 'content',
      title: 'Что у вас есть для наполнения сайта?',
      type: 'multiselect',
      field: 'content',
      options: [
        'логотип компании',
        'качественные фотографии',
        'готовые тексты о компании',
        'описания товаров/услуг',
        'отзывы клиентов',
        'сертификаты и награды',
        'контактная информация',
        'пока ничего готового нет'
      ],
      canSkip: true
    },
    {
      id: 'features',
      title: 'Необходимые функции сайта',
      type: 'multiselect',
      field: 'features',
      options: [
        'форма обратной связи',
        'онлайн чат с клиентами',
        'кнопка для быстрого звонка',
        'интерактивная карта проезда',
        'каталог товаров/услуг',
        'система онлайн записи',
        'блог или новости',
        'галерея работ',
        'калькулятор стоимости',
        'интеграция с соцсетями',
        'мультиязычность',
        'личный кабинет клиентов'
      ],
      canSkip: true
    },
    {
      id: 'deadline',
      title: 'Когда нужен готовый сайт?',
      type: 'choice',
      field: 'deadline',
      options: [
        'вчера — очень срочно',
        'в течение 1-2 недель',
        'в течение месяца',
        'в течение 2-3 месяцев',
        'не срочно, качество важнее скорости'
      ],
      canSkip: true
    },
    {
      id: 'budget',
      title: 'Планируемый бюджет на сайт',
      type: 'choice',
      field: 'budget',
      options: [
        'до $500 — простой сайт-визитка',
        '$500-1000 — функциональный сайт',
        '$1000-2000 — профессиональный сайт',
        '$2000+ — комплексное решение',
        'готов обсудить после консультации'
      ],
      canSkip: true
    }
  ];

  // Сценарий B: доработка существующего сайта
  const scenarioB: BriefStep[] = [
    {
      id: 'siteUrl',
      title: 'Ссылка на ваш текущий сайт',
      type: 'text',
      field: 'siteUrl',
      placeholder: 'https://ваш-сайт.ru',
      canSkip: false
    },
    {
      id: 'remove',
      title: 'Основные проблемы текущего сайта',
      type: 'multiselect',
      field: 'remove',
      options: [
        'устаревший дизайн',
        'неудобно использовать на мобильных',
        'медленно загружается',
        'сложно найти нужную информацию',
        'приходит мало заявок',
        'не отображается в поиске Google',
        'часто ломается или недоступен',
        'нет современных функций',
        'не соответствует бренду компании'
      ],
      canSkip: true
    },
    {
      id: 'keep',
      title: 'Что точно нужно сохранить?',
      type: 'multiselect',
      field: 'keep',
      options: [
        'общую структуру сайта',
        'существующий контент',
        'цветовую схему',
        'логотип и фирменный стиль',
        'доменное имя',
        'SEO позиции в поиске',
        'интеграции с другими системами',
        'ничего особенного'
      ],
      canSkip: true
    },
    {
      id: 'goals',
      title: 'Цели обновления сайта',
      type: 'multiselect',
      field: 'goals',
      options: [
        'увеличить количество заявок',
        'улучшить позиции в поиске',
        'сделать удобным на мобильных',
        'обновить внешний вид',
        'ускорить загрузку',
        'добавить новые функции',
        'упростить управление контентом',
        'повысить доверие клиентов'
      ],
      canSkip: true
    },
    {
      id: 'content',
      title: 'Контент для обновленного сайта',
      type: 'multiselect',
      field: 'content',
      options: [
        'обновленный логотип',
        'новые качественные фотографии',
        'переписанные тексты',
        'свежие отзывы клиентов',
        'актуальная информация о услугах',
        'новые сертификаты и награды',
        'пока планируем использовать старое',
        'нужна помощь с созданием контента'
      ],
      canSkip: true
    },
    {
      id: 'features',
      title: 'Дополнительные функции',
      type: 'multiselect',
      field: 'features',
      options: [
        'улучшенная форма обратной связи',
        'онлайн чат с клиентами',
        'кнопка для быстрого звонка',
        'интерактивная карта',
        'расширенный каталог',
        'система онлайн записи',
        'блог или новости',
        'галерея работ',
        'интеграция с CRM системой',
        'аналитика и метрики',
        'A/B тестирование'
      ],
      canSkip: true
    },
    {
      id: 'deadline',
      title: 'Временные рамки проекта',
      type: 'choice',
      field: 'deadline',
      options: [
        'максимально быстро — за неделю',
        'в течение месяца',
        'в течение 2-3 месяцев',
        'поэтапно, по мере готовности',
        'не срочно, качество важнее'
      ],
      canSkip: true
    },
    {
      id: 'budget',
      title: 'Бюджет на доработку',
      type: 'choice',
      field: 'budget',
      options: [
        'до $300 — косметические изменения',
        '$300-800 — существенные улучшения',
        '$800-1500 — серьезная модернизация',
        '$1500+ — полная реконструкция',
        'зависит от объема работ'
      ],
      canSkip: true
    }
  ];

  // Контакты (общий для обоих сценариев)
  const contactStep: BriefStep = {
    id: 'contact',
    title: 'Как с вами связаться?',
    type: 'contact',
    field: 'contact',
    canSkip: false
  };

  // Определяем путь на основе выбора
  if (briefData.hasSite === null) {
    return [initialStep];
  }

  const steps = briefData.hasSite === false ? scenarioA : scenarioB;
  return [...steps, contactStep];
};